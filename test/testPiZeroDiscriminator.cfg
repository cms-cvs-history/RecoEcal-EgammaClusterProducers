
#
#  run on collection of ecal+ES rechits and calculate the pi0 Discrimination variable
#  which is stored in an AssociationMap with PhotonCollection
#
#  Notice: to write the new root file read events should be created with the same version of CMSSW
#
# authors A. Kyriakis NCSR "Demokritos" Athens
#         D. Maletic Vinca "Belgrate"
#
process PiZeroDiscriminatorProcess = 
{

  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  untracked PSet maxEvents = {untracked int32 input = -1}

  # input module. assume root file contains EcalRecHits
  source = PoolSource 
  {
    untracked vstring fileNames = {
     'rfio:/castor/cern.ch/user/a/akyriaki/GammaJet/CMSSW160Prod/Ptbin_20/RECO_noPU/GammaJet_50evt_Ptbin_20_allReco_Run_1_noPU.root'
    }
  }

  # geometry needed for clustering
  include "RecoEcal/EgammaClusterProducers/data/geometryForClustering.cff"

  # pi0 discrimination variables
  include "RecoEcal/EgammaClusterProducers/data/piZeroDiscriminators.cfi"


  # create path with all clustering algos
  path p = { piZeroDiscriminators  }


  # output module so store ony (super)clusters and MC truth
  module o2 = PoolOutputModule
  {
     untracked string fileName = "/tmp/akyriaki/GammaJet_Ptbin_20_Run_1_NNout.root"
     untracked vstring outputCommands =
     {
       "keep *"
     }
  }

  # print event number
  module counter = AsciiOutputModule {}

  endpath outpath = { counter, o2 }
}
