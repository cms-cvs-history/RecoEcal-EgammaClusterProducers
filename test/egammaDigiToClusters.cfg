#
#  run on collection of ecal digis, make rechits, and then super clusters and store them
#  in the output collection
#
#  digi->rechit based on example from Fabio Cossutti
#
#  Author: David Futyan & Shahram Rahatlou
#  $Id: egammaDigiToClusters.cfg,v 1.13 2007/05/17 19:04:13 futyand Exp $
#
process eg = {

 # initialize  MessageLogger
 include "FWCore/MessageLogger/data/MessageLogger.cfi"

 # input
  source = PoolSource {
     #untracked vstring fileNames = {'file:ecal_digis.root'}
     untracked vstring fileNames = {
	    '/store/RelVal/2007/9/19/RelVal-RelValDiElectron_Pt_5_100-1190216041/0003/14286614-5467-DC11-B1E9-000423D99996.root',
	    '/store/RelVal/2007/9/19/RelVal-RelValDiElectron_Pt_5_100-1190216041/0003/1E0674DB-0567-DC11-B7FE-000423D94AA8.root'}
     untracked uint32 debugVebosity = 10
     untracked bool   debugFlag     = true
  }

  untracked PSet maxEvents = {untracked int32 input = -1}

  #Standard sequences
  include "Configuration/StandardSequences/data/FakeConditions.cff"
  include "Configuration/StandardSequences/data/Reconstruction.cff"

  # all clustering in one sequence
  include "RecoEcal/EgammaClusterProducers/data/ecalClusteringSequence.cff"

  # path to run everything
  path p = { ecalLocalRecoSequence, ecalClusteringSequence }

  # output module
  module o2 = PoolOutputModule
  {
     untracked string fileName = "egamma_clusters_from_digis.root"
     untracked vstring outputCommands = {
       "drop *",
       "keep edmHepMCProduct_*_*_*",
       "keep *_islandBasicClusters_*_*",
       "keep *_islandSuperClusters_*_*",
       "keep *_hybridSuperClusters_*_*",
       "keep *_correctedIslandEndcapSuperClusters_*_*",
       "keep *_correctedIslandBarrelSuperClusters_*_*",
       "keep *_correctedHybridSuperClusters_*_*",
       "keep *_correctedEndcapSuperClustersWithPreshower_*_*",
       "keep *_piZeroDiscriminators_*_*"
     }
  }

  endpath outpath = { o2 }
}
