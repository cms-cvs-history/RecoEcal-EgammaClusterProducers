# stream selected electrons 
#
#
process ReducedRecHitProductionTesting = 
{

  untracked PSet maxEvents = {untracked int32 input = 100}
  untracked PSet options = {
      untracked bool wantSummary = true  # default is false
  }

  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  #--------------------------------
  # geometry needed for clustering
  #--------------------------------
  include "RecoEcal/EgammaClusterProducers/data/geometryForClustering.cff"

  source = PoolSource {
    untracked vstring fileNames =
	{
#	    '/store/relval/2008/4/17/RelVal-RelValTTbar-1208465820/0000/0ABDA540-EE0C-DD11-BA9F-000423D94990.root'
	    'file:egamma_clusters.root'
	}
    }


    #  ReducedRecHit producer EB
    module interestingEcalDetIdEB = InterestingDetIdCollectionProducer
      {
        InputTag recHitsLabel = ecalRecHit:EcalRecHitsEB
        InputTag basicClustersLabel = hybridSuperClusters
        
        string interestingDetIdCollection = "Hybrid"
        
        int32 etaSize = 5
        int32 phiSize = 5
      }

    #  Interesting DetId EE producer EE
    module interestingEcalDetIdEE = InterestingDetIdCollectionProducer
      {
        InputTag recHitsLabel = ecalRecHit:EcalRecHitsEE
        InputTag basicClustersLabel = islandBasicClusters:islandEndcapBasicClusters
        
        string interestingDetIdCollection = "Island"
        
        int32 etaSize = 5
        int32 phiSize = 5
      }

    #  ReducedRecHit producer EE
    module reducedEcalRecHitsEB = ReducedRecHitCollectionProducer
      {
        InputTag recHitsLabel = ecalRecHit:EcalRecHitsEB
        VInputTag interestingDetIdCollections = { interestingEcalDetIdEB:Hybrid }
        
        string reducedHitsCollection = ""
        
      }
    #  ReducedRecHit producer EE
    module reducedEcalRecHitsEE = ReducedRecHitCollectionProducer
      {
        InputTag recHitsLabel = ecalRecHit:EcalRecHitsEE
        VInputTag interestingDetIdCollections = { interestingEcalDetIdEE:Island}
        
        string reducedHitsCollection = ""
        
      }



    path p4 = { 
	interestingEcalDetIdEB, 
	interestingEcalDetIdEE, 
	reducedEcalRecHitsEB, 
	reducedEcalRecHitsEE  
    }



# --- output module ------------------------------------------------


    module outReducedRecHit = PoolOutputModule
    {
      untracked string fileName = "reducedHits.root" 
#      untracked vstring outputCommands = 
#      {
#          "drop  *",
#          "keep  *_interestingEcalDetId*_*_*",
#          "keep  *_reducedEcalRecHits*_*_*",
#          "keep  *_ecalRecHit_*_*",
#          "keep  *Shape*_*_*_*"
#      }
	untracked PSet SelectEvents = 
	{
	    vstring SelectEvents = { "p4" }
	}
    }
    
    endpath outpathAlca = { outReducedRecHit }

}
