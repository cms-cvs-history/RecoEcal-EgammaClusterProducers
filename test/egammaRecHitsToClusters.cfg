#
#  run on collection of ecal rechits to make super clusters and store them
#  in the output collection
#
#  Author: David Futyan & Shahram Rahatlou
#  $Id: egammaRecHitsToClusters.cfg,v 1.7 2006/05/25 11:31:54 rahatlou Exp $
#
process egammaRecHitsToClustersProcess = 
{


  # input module. assume root file contains EcalRecHits
  source = PoolSource 
  {
    # Number of events program should run
    untracked vstring fileNames = {'file:ecal_rechits.root'}
    untracked int32 maxEvents = -1
  }

  #--------------------------------
  # geometry needed for clustering
  #--------------------------------
  include "RecoEcal/EgammaClusterProducers/data/geometryForClustering.cff"

  #------------------
  #Island clustering:
  #------------------
  # create sequence for island clustering
  include "RecoEcal/EgammaClusterProducers/data/islandClusteringSequence.cff"

  #------------------
  #Hybrid clustering:
  #------------------
  # hybrid clustering sequence
  include "RecoEcal/EgammaClusterProducers/data/hybridClusteringSequence.cff"

  # clusters in preshower
  include "RecoEcal/EgammaClusterProducers/data/preshowerClusteringSequence.cff"


  # create sequence with all clustering algos
  sequence ecalClustering = { islandClusteringSequence & hybridClusteringSequence, preshowerClusteringSequence }

  # create path with all clustering algos
  path p = { ecalClustering }


  # output module so store ony (super)clusters and MC truth
  module o2 = PoolOutputModule
  {
     untracked string fileName = "egamma_clusters.root" 
     untracked vstring outputCommands =
     {
       "drop *",
       "keep edmHepMCProduct_*_*_*",
       "keep recoBasicClusters_*_*_*",
       "keep recoSuperClusters_*_*_*"
     }
  }

  endpath outpath = { o2 }
}

