#
# run the preshower clustering sequence including the energy correction
# and store the energy corrected endcap super clusters in the output collection
#
#  Author: Dmitry Bandurin, Kansas State University
#
process PreshowerClusterProcess = 
{

  source = PoolSource 
  {
    untracked vstring fileNames = {'file:ecal_rechits.root'}
  }

  # Number of events program should run
  untracked PSet maxEvents = {untracked int32 input = 500}

  #--------------------------------
  # geometry needed for clustering
  #--------------------------------
  include "RecoEcal/EgammaClusterProducers/data/geometryForClustering.cff"

  #------------------
  #Island clustering:
  #------------------
  # create sequence for island clustering
  include "RecoEcal/EgammaClusterProducers/data/islandClusteringSequence.cff"

  #------------------
  #Preshower clustering:
  #------------------
  # create sequence for island clustering
  include "RecoEcal/EgammaClusterProducers/data/preshowerClusteringSequence.cff"

  //path p = { preshowerClusteringSequence }
  path p = { islandClusteringSequence, preshowerClusteringSequence}

  module o2 = PoolOutputModule 
  { 
     untracked string fileName = "egamma_preshowerclusters.root" 
#     untracked vstring outputCommands = 
#     {
#       "drop *",
#       "keep edmHepMCProduct_*_*_*",
#       "keep recoBasicClusters_*_*_*",
#       "keep recoSuperClusters_*_*_*"
#     }
  }

  endpath outpath = { o2 }

}

