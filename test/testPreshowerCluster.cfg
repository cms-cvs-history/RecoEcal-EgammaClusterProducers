#
# run the preshower clustering sequence including the energy correction
# and store the energy corrected endcap super clusters in the output collection
#
#  Author: Dmitry Bandurin, Kansas State University
#
process PreshowerClusterProcess = 
{

  source = PoolSource 
  {
    # Number of events program should run    
    untracked vstring fileNames = {'file:gamma_pt20_ECAL_ES_RecHits_500events.root'}
    untracked int32 maxEvents = 500
  }
  #--------------------------------
  # geometry needed for clustering
  #--------------------------------
  include "RecoEcal/EgammaClusterProducers/data/geometryForClustering.cff"

  #------------------
  #Island clustering:
  #------------------
  # create sequence for island clustering
  include "RecoEcal/EgammaClusterProducers/data/islandClusteringSequence.cff"

  #------------------
  #Preshower clustering:
  #------------------
  # create sequence for island clustering
  include "RecoEcal/EgammaClusterProducers/data/preshowerClusteringSequence.cff"

  //path p = { preshowerClusteringSequence }
  path p = { islandClusteringSequence, preshowerClusteringSequence}

  module o2 = PoolOutputModule 
  { 
     untracked string fileName = "preshower.root" 
#     untracked vstring outputCommands = 
#     {
#       "drop *",
#       "keep edmHepMCProduct_*_*_*",
#       "keep recoBasicClusters_*_*_*",
#       "keep recoSuperClusters_*_*_*"
#     }
  }

  endpath outpath = { o2 }

}

